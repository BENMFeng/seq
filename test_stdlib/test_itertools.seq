import itertools
import math

def lzip(args):
    return list(zip(args))


def underten(x: int) -> bool:
    return x < 10

def isEven(x: int) -> bool:
    return x % 2 == 0

def boolean(x: int) -> bool:
    if x: return True
    else: return False

def take(n, seq):
    """Convenience function for partially consuming a long of infinite iterable"""
    return list(itertools.islice(seq, 0, n, 1))

def combinations():
    assert list(itertools.combinations('ABCD', 2)) == [['A','B'], ['A','C'], ['A','D'], ['B','C'], ['B','D'], ['C','D']]
    test_intermediate = itertools.combinations('ABCD', 2)
    next(test_intermediate)
    assert list(test_intermediate) == [['A','C'], ['A','D'], ['B','C'], ['B','D'], ['C','D']]
    assert list(itertools.combinations(range(4), 3)) == [[0, 1, 2], [0, 1, 3], [0, 2, 3], [1, 2, 3]]
    test_intermediat = itertools.combinations(range(4), 3)
    next(test_intermediat)
    assert list(test_intermediat) == [[0, 1, 3], [0, 2, 3], [1, 2, 3]]
# combinations()

def combinations_with_replacement():
    assert list(itertools.combinations_with_replacement(range(3), 3)) == [[0, 0, 0], [0, 0, 1], [0, 0, 2], [0, 1, 1], [0, 1, 2], [0, 2, 2], [1, 1, 1], [1, 1, 2], [1, 2, 2], [2, 2, 2]]
    assert list(itertools.combinations_with_replacement('ABC', 2)) == [['A', 'A'], ['A', 'B'], ['A', 'C'], ['B', 'B'], ['B', 'C'], ['C', 'C']]
    test_intermediate = itertools.combinations_with_replacement('ABC', 2)
    next(test_intermediate)
    assert list(test_intermediate) == [['A', 'B'], ['A', 'C'], ['B', 'B'], ['B', 'C'], ['C', 'C']]
# combinations_with_replacement()

def islice():
    ra100 = range(100)
    ra = range(10)
    assert list(itertools.islice('ABCDEFG', 0, 2, 1)) == ['A', 'B']
    assert list(itertools.islice(ra100, 10, 20, 3)) == [10, 13, 16, 19]
    assert list(itertools.islice(ra100, 10, 3, 20)) == [0]
    assert list(itertools.islice(ra100, 10, 20, 1)) == [10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
    assert list(itertools.islice(ra100, 10, 10, 1)) == [0]
    assert list(itertools.islice(ra100, 10, 3, 1)) == [0]
    # stop=len(iterable)
    assert list(itertools.islice(ra, 0, 10, 1)) == [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
    assert list(itertools.islice(ra, 2, 10, 1)) == [2, 3, 4, 5, 6, 7, 8, 9]
    assert list(itertools.islice(ra, 1, 10, 2)) == [1, 3, 5, 7, 9]
    assert list(itertools.islice(ra, -5, 10, 1))
# islice()

def count():
    for x in itertools.count(0.0, 1.0):
        if x == 10.0:
            break
        print x
    for x in itertools.count(3.25, 1.0):
        if x == 5.25:
            break
        print x
    # print take(3, itertools.count(3.25, 1.0))
# count()

def repeat():
    assert list(itertools.repeat('a', 3)) == ['a', 'a', 'a']
    assert list(itertools.repeat(1, 10)) == [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
    assert list(itertools.repeat('a', -1)) == ['a']
    print list(itertools.repeat('a', 0))
# repeat()

def cycle():
    i = 0
    for x in itertools.cycle('abc'):
        if i == 10:
            i = 0
            break
        i += 1
        print x
    # having troubles with lists...
    for x in itertools.cycle([0, 1, 2]):
        if i == 10:
            i = 0
            break
        i += 1
        print x
# cycle()

def compress():
    assert itertools.compress('ABCDEF', [1, 0, 1, 0, 1, 1]) == ['A', 'C', 'E', 'F']
    assert itertools.compress('ABCDEF', [1, 1, 1, 1, 1, 1]) == ['A', 'B', 'C', 'D', 'E', 'F']
    assert itertools.compress('ABCDEF', [1, 0, 1]) == ['A', 'C']
    assert itertools.compress('ABC', [0, 1, 1, 1, 1, 1]) == ['B', 'C']
# compress()

def dropwhile():
    data = [1, 3, 5, 20, 2, 4, 6, 8]
    assert list(itertools.dropwhile(underten, data)) == [20, 2, 4, 6, 8]
# dropwhile()

def takewhile():
    data = [1, 3, 5, 20, 2, 4, 6, 8]
    assert list(itertools.takewhile(underten, data)) == [1, 3, 5]
# takewhile()

def filterfalse():
    assert list(itertools.filterfalse(isEven, range(10))) == [1, 3, 5, 7, 9]
    assert list(itertools.filterfalse(boolean, [0, 1, 0, 2, 0])) == [0, 0, 0]
# filterfalse()

def permutations():
    assert list(itertools.permutations(range(3), 2)) == [[0, 1], [0,2], [1,0], [1,2], [2,0], [2,1]]

    for n in range(3):
        values = [5*x-12 for x in range(n)]
        for r in range(n+2):
            result = list(itertools.permutations(values, r))
            if r > n:   # right number of perms
                assert len(result) == 0
            # factorial is not yet implemented in math
            # else: fact(n) / fact(n - r)
# permutations()

def accumulate():
    # addition
    assert list(itertools.accumulate(range(10), int.__add__, 0)) == [0, 1, 3, 6, 10, 15, 21, 28, 36, 45]
    assert list(itertools.accumulate([7], int.__add__, 0)) == [7]       # iterable of length 1
    assert list(itertools.accumulate('abc', str.__add__, '')) == ['a', 'ab', 'abc']
    assert list(itertools.accumulate([''], str.__add__, 0)) == ['']
    # multiply
    assert list(itertools.accumulate(range(10), int.__mul__, 0)) == [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    assert list(itertools.accumulate([1, 2, 3, 4, 5], int.__mul__, 0)) == [1, 2, 6, 24, 120]
    assert list(itertools.accumulate([7], int.__mul__, 0)) == [7]
# accumulate()

def product():
    assert list(itertools.product(['ABCD', 'xy'], 1)) == [['A', 'x'], ['A', 'y'], ['B', 'x'], ['B', 'y'], ['C', 'x'], ['C', 'y'], ['D', 'x'], ['D', 'y']]
    print list(itertools.product(['01'], 3))
# product()

def chain():
    assert list(itertools.chain(['abc', 'def'])) == ['a', 'b', 'c', 'd', 'e', 'f']
    assert list(itertools.chain(['abc'])) == ['a', 'b', 'c']
    assert list(itertools.chain(['a', 'b', 'c'])) == ['a', 'b', 'c']
chain()

def starmap():
    assert list(itertools.starmap(math.pow, [(2.0, 5.0), (3.0, 2.0), (10.0, 3.0)])) == [32.0, 9.0,  1000.0]
    assert list(itertools.starmap(math.pow, [(0.0, 1.0), (1.0, 2.0), (2.0, 3.0)])) == [0.0**1.0, 1.0**2.0, 2.0**3.0]
# starmap()
